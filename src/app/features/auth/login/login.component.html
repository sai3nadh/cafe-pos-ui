<!-- <div class="flex justify-center items-center h-screen">
    <div class="card">
      <div class="card-header">
        <h2>Login</h2>
      </div>
      <div class="card-content">
        <label for="username">Username</label>
        <input id="username" type="text" [(ngModel)]="username" placeholder="Enter your username" />
  
        <label for="password">Password</label>
        <input id="password" type="password" [(ngModel)]="password" placeholder="Enter your password" />
      </div>
      <div class="card-footer">
        <button (click)="handleLogin()">Login</button>
      </div>
    </div>
  </div>
   -->
<div class="login-page" hidden>
  <div class="flex">
    <div class="card">
      <div class="card-header">
        <h2>Login</h2>
      </div>
      <div class="card-content">
        <label for="username">Username</label>
        <input id="username" type="text" [(ngModel)]="username" placeholder="Enter your username" />

        <label for="password">Password</label>
        <input id="password" type="password" [(ngModel)]="password" placeholder="Enter your password" />
        <!-- Show login error message here if it exists -->
        <div *ngIf="loginError" class="error-message">
          {{ loginError }}
        </div>
      </div>
      <div class="card-footer">
        <button (click)="handleLogin()">Login</button>
        <!-- <p class="toggle-text">
          Don't have an account?
          <a [routerLink]="'/register'">Register</a>
        </p> -->
      </div>
    </div>
  </div>
</div>

<!-- <div class="profiles-container">
  <div class="profile-card" *ngFor="let user of profiles" (click)="selectUser(user)">
    <div class="avatar-icon">ðŸ‘¤</div>
    <div class="profile-name">{{ user.firstName }} {{ user.lastName }}</div>
    <div class="profile-role">({{ user.role }})</div>
  </div>
</div>



<div class="profiles-container">
  <div class="profile-card" *ngFor="let user of profiles" (click)="selectUser(user)">
    <div class="avatar-icon">ðŸ‘¤</div>
    <div class="profile-name">{{ user.firstName }} {{ user.lastName }}</div>
    <div class="profile-role">({{ user.role }})</div>
  </div>
</div>

<div *ngIf="selectedUser" class="pin-modal">
  <h3>Enter PIN for {{ selectedUser.firstName }}</h3>
  <input type="password" [(ngModel)]="pin" maxlength="6" placeholder="Enter PIN" />
  <button (click)="submitPinLogin()">Login</button>
  <button (click)="reset()">Cancel</button>
  <div *ngIf="error" class="error">{{ error }}</div>
</div> -->


<div class="login-page" >

<div class="login-header">
  <h1>Cafe-SISILI</h1>
  <p>Select your profile to log in</p>
   <h1>{{onloadMsg}}</h1>
</div>
<div class="profiles-grid">
  <!-- <div *ngIf="profiles.length === 0">Please contact Administrator!!!</div> -->
  <!-- <h1>{{onloadMsg}}</h1> -->
  <div class="profile-card" *ngFor="let user of profiles" (click)="selectUser(user)">
    <div class="avatar-circle">
      
      {{  user.username}}
      <!-- {{ getInitials(user.username, user.username) }} -->
    </div>
    <div class="profile-name">{{ user.firstName }} {{ user.lastName }}</div>
    <div class="profile-role">{{ user.role }}</div>
  </div>
</div>

</div>
<!-- PIN Modal -->
<div class="modal-backdrop" *ngIf="selectedUser" (click)="closePinPopup()">
  <div class="modal-box" (click)="$event.stopPropagation()">
    <h2>Enter PIN for {{ selectedUser.firstName }}</h2>
    <input
      type="password"
      [(ngModel)]="pin"
      maxlength="6"
      placeholder="Enter PIN"
    />
    <div class="modal-actions">
      <button (click)="submitPinLogin()">Login</button>
      <button class="cancel-btn" (click)="reset()">Cancel</button>
    </div>
    <div *ngIf="error" class="error">{{ error }}</div>
  </div>
</div>

<div *ngIf="isLoading" class="spinner-overlay">
  <div class="spinner"></div>
</div>